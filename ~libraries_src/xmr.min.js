(function() {var k="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function n(){n=function(){};m.Symbol||(m.Symbol=p)}var q=0;function p(a){return"jscomp_symbol_"+(a||"")+q++}
function t(){n();var a=m.Symbol.iterator;a||(a=m.Symbol.iterator=m.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&k(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return u(this)}});t=function(){}}function u(a){var b=0;return v(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function v(a){t();a={next:a};a[m.Symbol.iterator]=function(){return this};return a}function w(a){t();var b=a[Symbol.iterator];return b?b.call(a):u(a)}
for(var x=m,y=["Promise"],z=0;z<y.length-1;z++){var B=y[z];B in x||(x[B]={});x=x[B]}
var C=y[y.length-1],D=x[C],E=function(){function a(a){this.f=0;this.l=void 0;this.c=[];var f=this.h();try{a(f.resolve,f.reject)}catch(d){f.reject(d)}}function b(){this.b=null}if(D)return D;b.prototype.m=function(a){null==this.b&&(this.b=[],this.v());this.b.push(a)};b.prototype.v=function(){var a=this;this.o(function(){a.A()})};var c=m.setTimeout;b.prototype.o=function(a){c(a,0)};b.prototype.A=function(){for(;this.b&&this.b.length;){var a=this.b;this.b=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];
try{d()}catch(l){this.w(l)}}}this.b=null};b.prototype.w=function(a){this.o(function(){throw a;})};a.prototype.h=function(){function a(a){return function(f){d||(d=!0,a.call(b,f))}}var b=this,d=!1;return{resolve:a(this.D),reject:a(this.j)}};a.prototype.D=function(b){if(b===this)this.j(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof a)this.F(b);else{var f;a:switch(typeof b){case "object":f=null!=b;break a;case "function":f=!0;break a;default:f=!1}f?this.C(b):this.s(b)}};a.prototype.C=
function(a){var b=void 0;try{b=a.then}catch(d){this.j(d);return}"function"==typeof b?this.G(b,a):this.s(a)};a.prototype.j=function(a){this.u(2,a)};a.prototype.s=function(a){this.u(1,a)};a.prototype.u=function(a,b){if(0!=this.f)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.f);this.f=a;this.l=b;this.B()};a.prototype.B=function(){if(null!=this.c){for(var a=this.c,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.c=null}};var e=new b;a.prototype.F=function(a){var b=this.h();
a.g(b.resolve,b.reject)};a.prototype.G=function(a,b){var d=this.h();try{a.call(b,d.resolve,d.reject)}catch(l){d.reject(l)}};a.prototype.then=function(b,c){function d(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(Q){e(Q)}}:b}var f,e,h=new a(function(a,b){f=a;e=b});this.g(d(b,f),d(c,e));return h};a.prototype["catch"]=function(a){return this.then(void 0,a)};a.prototype.g=function(a,b){function d(){switch(c.f){case 1:a(c.l);break;case 2:b(c.l);break;default:throw Error("Unexpected state: "+
c.f);}}var c=this;null==this.c?e.m(d):this.c.push(function(){e.m(d)})};a.resolve=function(b){return b instanceof a?b:new a(function(a){a(b)})};a.reject=function(b){return new a(function(a,c){c(b)})};a.race=function(b){return new a(function(c,d){for(var e=w(b),f=e.next();!f.done;f=e.next())a.resolve(f.value).g(c,d)})};a.all=function(b){var c=w(b),d=c.next();return d.done?a.resolve([]):new a(function(b,e){function f(a){return function(c){g[a]=c;h--;0==h&&b(g)}}var g=[],h=0;do g.push(void 0),h++,a.resolve(d.value).g(f(g.length-
1),e),d=c.next();while(!d.done)})};a.$jscomp$new$AsyncExecutor=function(){return new b};return a}();E!=D&&null!=E&&k(x,C,{configurable:!0,writable:!0,value:E});var F=[],G=[],H=5,I=0,J="";
function K(){(function(a){if(G.length<H&&0<F.length){var b=F.shift(),c=function(a,c){for(var e=w(b.i),d=e.next();!d.done;d=e.next())d.value[a](c)};b.id=a;b.a=new XMLHttpRequest;b.a.open(b.type,J+b.url,!0);"POST"==b.type&&b.a.setRequestHeader("Content-Type","application/json");b.a.onload=function(){for(var e in G)G[e].id==a&&G.splice(e,1);200==b.a.status?c(0,b.a.response):c(1,"Unxpected Error");K()};b.a.onerror=function(){for(var b in G)G[b].id==a&&G.splice(b,1);return c(1,"Network Error")};b.a.onabort=
function(){for(var b in G)G[b].id==a&&G.splice(b,1);return c(1,"Canceled")};G.push(b);b.a.send("object"==typeof b.data?JSON.stringify(b.data):b.data);K()}})(++I)}function L(a,b,c,e){return new Promise(function(f,h){var d=!1;if("POST"!=c){for(var l=w(F),g=l.next();!g.done;g=l.next())if(g=g.value,g.url==a){g.i.push([f,h]);d=!0;break}if(!d)for(l=w(G),g=l.next();!g.done;g=l.next())if(g=g.value,g.url==a){g.i.push([f,h]);d=!0;break}}d||F.push({url:a,name:b||"",i:[[f,h]],type:c,data:e});K()})}
function M(a,b,c,e){return new Promise(function(f,h){L(a,b,c,e).then(function(a){var b=JSON.parse(a);null===b?(console.log("Invalid JSON",a),h("Invalid JSON")):f(b)},h)})}function N(a,b,c,e,f,h){return"string"==typeof b?a(b,c,f,h):new Promise(function(d,l){var g=1,A=Array.isArray(b)?[]:{},r;for(r in b)g++,function(b,r){a(r,c,f,h).then(function(a){A[b]=a;(e||function(){})(a,b,r,c);0==--g&&d(A)},l)}(r,b[r]);0==--g&&d(A)})}function O(a,b,c){return N(M,a,b,c,"GET")}
function P(a,b,c,e){return N(M,a,c,e,"POST",b)}function R(a){J=a||""}
window.xmr={setMax:function(a){H=a;K()},setSuffix:R,setServer:R,getJSON:O,getJson:O,get:function(a,b,c){return N(L,a,b,c,"GET")},postJSON:P,postJson:P,post:function(a,b,c,e){return N(L,a,c,e,"POST",b)},cancel:function(a){for(var b=F.length,c=[];0<b--;)F[b].name==a&&(c.push(F[b].reject),F.splice(b,1));for(var b=w(G),e=b.next();!e.done;e=b.next())e=e.value,e.name==a&&e.a.abort();a=w(c);for(c=a.next();!c.done;c=a.next())c=c.value,c("Canceled");K()}};
})();

